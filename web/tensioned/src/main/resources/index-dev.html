<!DOCTYPE html>
<head>
  <meta http-equiv="Content-Language" content="en">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <title>DiBL - Dynamic bobbin lace working diagrams for grounds</title>
  <style>
    input { width: 3em; }
    .link { stroke: #000; }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script src="https://raw.githubusercontent.com/jo-pol/DiBL/gh-pages/tensioned/sample.js"></script>
  <script src="https://raw.githubusercontent.com/jo-pol/DiBL/gh-pages/tensioned/show-graph.js"></script>
  <script type="text/javascript" src="../dibl-tensioned-fastopt.js"></script>
  <script type="text/javascript" src="/workbench.js"></script>
  <script>
    fullyTransparant = 0.1

    function show(form) {
      document.getElementById('diagram').innerHTML = ""
      var data = dibl.D3Data().get(form.set.value, form.nrInSet.value * 1, form.rows.value * 1, form.cols.value * 1)
      showGraph({
        threadColor: '#colorpicker',
        container: '#diagram',
        width: 1000,
        height: 800,
        nodes: data.nodes,
        links: data.links,
      })
    }

    function setMax(form) {
      form.nrInSet.max = form.set[form.set.selectedIndex].getAttribute("data-max-nr")
    }
  </script>
</head>
<body onload="show(document.getElementById('graph'))">
  <form id="graph" action="" onsubmit="show(this); return false;">
    <label for="set">set of predefined matrices</label>
    <select size="1" id="set" name="set" onChange="setMax(form)">
      <option data-max-nr="6">2x2</option>
      <option data-max-nr="92">4x2</option>
      <option data-max-nr="46" selected>2x4</option>
    </select>
    <label for="nrInSet">nr in set</label>
    <input id="nrInSet" name="nrInSet" min="0" max="46" value="3" type="number"/>
    <label for="rows">rows</label>
    <input id="rows" name="rows" min="0" max="20" value="14" type="number"/>
    <label for="cols">columns</label>
    <input id="cols" name="cols" min="0" max="20" value="7" type="number"/>
    <button class="button" type="submit">draw</button>
  </form>
  <form id="color" action="" onsubmit="return false;" style="visibility: hidden;">
    <!-- test this one in gh-pages branch, omitting it would break the showGraph function -->
    <input id="colorpicker" type="text" class="color" value="#CC0000"/>
  </form>
  <div id="diagram"></div>
</body>