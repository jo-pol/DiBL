<!DOCTYPE html>
<head>
  <meta http-equiv="Content-Language" content="en">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="UTF-8">
  <title>DiBL - Dynamic bobbin lace working diagrams for grounds</title>
  <style>
    fieldset, svg { display: inline-block }
    input { width: 3em; }
    #pattern { width: 6em; }
    #stitches { width: 29em; }
    .link { stroke: #000; }
    svg{ border: solid 1px #AAA; margin-right: 0.4em; }
  </style>
  <link href="https://raw.githubusercontent.com/jo-pol/DiBL/gh-pages/tensioned/colorpicker/mcColorPicker.css" rel="stylesheet" type="text/css" />
  <script src="https://raw.githubusercontent.com/jo-pol/DiBL/gh-pages/tensioned/colorpicker/mcColorPicker.js" type="text/javascript"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script src="https://raw.githubusercontent.com/jo-pol/DiBL/gh-pages/tensioned/sample.js"></script>
  <script src="https://raw.githubusercontent.com/jo-pol/DiBL/gh-pages/tensioned/show-graph.js"></script>
  <script type="text/javascript" src="../dibl-tensioned-fastopt.js"></script>
  <script type="text/javascript" src="/workbench.js"></script>
  <script>
    fullyTransparant = 0.1

    function showNr(form) {
      show( dibl.D3Data().get(form.set.value, form.nrInSet.value * 1,
                              form.rows.value * 1, form.cols.value * 1,
                              form.shiftLeft.value * 1, form.shiftUp.value * 1,
                              form.stitches.value) )
    }
    function showHardCodedPattern(form) {
      show( dibl.D3Data().hardCodedPattern() )
    }
    function show(data){
      document.getElementById('diagram').innerHTML = ""
      showGraph({
        threadColor: '#colorpicker',
        container: '#diagram',
        width: 350,
        height: 600,
        nodes: data.nodes,
        links: data.links
      })
      showGraph({
        threadColor: '#colorpicker',
        container: '#diagram',
        width: 800,
        height: 600,
        nodes: data.threadNodes,
        links: data.threadLinks
      })
    }
    function setMax(form) {
      form.nrInSet.max = form.set[form.set.selectedIndex].getAttribute("data-max-nr")
    }
  </script>
</head>
<body onload="showHardCodedPattern(document.getElementById('graph'))">
  <form id="graph" action="" onsubmit="return false">
    <fieldset id="shift">
      <label for="shiftLeft">left by </label>
      <input id="shiftLeft" name="shiftLeft" min="0" max="3" value="3" type="number"/>
      <label for="shiftUp">up by </label>
      <input id="shiftUp" name="shiftUp" min="0" max="3" value="1" type="number"/>
    </fieldset>
    <fieldset>
      <label for="rows">rows</label>
      <input id="rows" name="rows" min="0" max="40" value="8" type="number"/>
      <label for="cols">columns</label>
      <input id="cols" name="cols" min="0" max="20" value="7" type="number"/>
    </fieldset>
    <fieldset>
      <label for="stitches">stitches</label>
      <input id="stitches" name="stitches" type="text"
             value="A1=tctpc, B1=tctpc, C1=tctpc, D1=tctpc, A2=tctpc, B2=tctpc, C2=tctpc, D2=tctpc"/>
    </fieldset>
    <fieldset>
      <select size="1" id="set" name="set" onChange="setMax(form)">
        <option data-max-nr="4" value="2x4 torchon">torchon</option>
        <option data-max-nr="2" value="2x4 bias">bias</option>
        <option data-max-nr="0" value="2x4 paris/kat">paris/kat</option>
        <option data-max-nr="1" value="2x4 cloth">cloth</option>
        <option data-max-nr="0" value="2x4 vrouwkens">vrouwkens</option>
        <option data-max-nr="1" value="2x4 small snowflakes">small snowflakes</option>
        <option data-max-nr="4" value="2x4 rose ground">rose ground</option>
        <option data-max-nr="6" selected>2x2</option>
        <option data-max-nr="92">4x2</option>
        <option data-max-nr="46">2x4</option>
      </select>
      <label for="nrInSet">nr</label>
      <input id="nrInSet" name="nrInSet" min="0" max="6" value="0" type="number"/>
      <button class="button" type="submit" onclick="showNr(this.form)">draw</button>
    </fieldset>
    <input id="colorpicker" type="text" class="color" value="#C00"/>
  </form>
  <div id="diagram"></div>
</body>