<!DOCTYPE html>
<head>
    <meta http-equiv="Content-Language" content="en">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="UTF-8">
    <title>DiBL - Bobbin lace working diagrams for grounds</title>
    <link href="colorpicker/mcColorPicker.css" rel="stylesheet" type="text/css" />
    <script src="colorpicker/mcColorPicker.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
    <script src="show-graph.js"></script>
    <script src="sample.js"></script>
    <script src="matrix-graphs.js"></script>
    <script>
      function show(form) {
        document.getElementById('diagram').innerHTML = ""
        var data = dibl.Graph().getD3Data("2x4", 0, form.rows.value, form.cols.value);
        showGraph({
          threadColor: '#colorpicker',
          container: '#diagram',
          width: form.width.value,
          height: form.height.value,
          nodes: data.nodes,
          links: data.links,
        })
      }
    </script>
    <style>
        input { width: 3em; }
        #threadColor input { width: 4.5em; }
        label, form { display: inline-block; }
        .node {
          fill: #000;
          opacity: 0;
        }
        .node.fixed {
          fill: #90f;
        }
        svg {vertical-align: text-top}

        /* size relates to dy-attribute of svg.selectAll(".labelText") in the script */
        .labelText {font-size:9px; font-weight: bold; }
    </style>
</head>
<body>
    <img align="right" src="../logo-big.png" width="104" height="96"/>
    <h1>Bobbin lace working diagrams</h1>
    <p><em>Under construction</em>: <a href="https://github.com/jo-pol/DiBL/labels/enhancement"
    >wish list</a>, see also the previous diagram generator based on <a href="http://jo-pol.github.io/DiBL/grounds"
       >templates</a> for thread diagrams.
    </p>
    <ul><li>
      Drag pins to fix their position, single click to release.
    </li><li>
      Hover over diagram components for tooltips: the stitch in terms of t(wist)c(cross)
        + spreadsheet like coordinates matching a brick wise stacked matrix.
    </li><li>
      The diagrams might be rotated, mirrored or twisted: dragging can fix that.
      A fast move may (un)twist or flip a diagram. Two twists can become a flip too.
    </li><li>
      FireFox, Chrome and Safari are fine, IE has a <a href="https://connect.microsoft.com/IE/feedback/details/801938/dynamically-updated-svg-path-with-a-marker-end-does-not-update"
      >problem</a> rendering the color codes of pair diagrams and over-under effect of thread diagrams.
    </li><li>
        <label form="graph">Try another size: </label>
        <form id="graph" action="" onsubmit="show(this); return false">

            <label for="rows">rows</label>
            <input id="rows" name="rows" min="0" max="20" value="6" type="number"/>
            <label for="cols">columns</label>
            <input id="cols" name="cols" min="0" max="20" value="7" type="number"/>

            <label for="width">width (px)</label>
            <input id="width" name="width" min="200" max="999" value="800" type="number"/>
            <label for="height">height (px)</label>
            <input id="height" name="height" min="200" max="999" value="400" type="number"/>

            <button class="button" type="submit">draw</button>
        </form>
    </li><li> 
        <form id="threadColor" action="" onsubmit="return false;">
            <label for="colorpicker">
              Single click the square start of a thread to paint it:
            </label>
            <input id="colorpicker" type="text" class="color" value="#CC0000"/>
        </form>
    </li></ul>
    <div id="diagram"></div>
    <script>
      showGraph({
        threadColor: '#colorpicker',
        container: '#diagram',
        width: 300,
        height: 300,
        nodes: sample.nodes,
        links: sample.links,
      })
    </script>
    <p><a href="https://github.com/jo-pol/DiBL/commits/gh-pages/tensioned/"
       >Changes</a>. Source code: <a href="https://github.com/jo-pol/DiBL/tree/gh-pages/tensioned"
       >html, js</a>, <a href="https://github.com/jo-pol/DiBL/tree/master/web/tensioned/src/main/scala/dibl"
       >scala</a>, contributions are welcome. Powered by: <a href="https://d3js.org"
       >D3.js</a>, <a href="http://www.menucool.com/color-picker"
       >Menucool</a>.
    </p>
</body>